<!DOCTYPE html>
<html style="width:100%;height:100%;display:block;">
<head>
    <meta charset="utf-8">
    <title>Dojo Blockly Demo</title>

    <link rel="stylesheet" href="../dojo/resources/dojo.css">
    <link rel="stylesheet" href="../dijit/themes/claro/claro.css">

    <script src="../dojo/dojo.js"></script>
</head>
<body class="claro" style="width:100%;height:100%;display:block;">
<script>

    dojoConfig= {
        has: {
            "dojo-firebug": true
        },
        parseOnLoad: false,
        async: true,
        packages: [
            {
                name: "build",
                location: '/blockly/build'
            }
        ]
    };

    require(["dist/Blockly", "dojo/domReady!"], function (Blockly) {

        var categoryArray = [
            {name: "Procedures", title: "Procedures", tooltip: "Hello there"},
            {name: "Math", title: "Math", icon: "sum.png", tooltip: "Hello there math"}
        ];
        var toolArray = [
            {category: "Procedures", block: {type: "controls_if"}, name: "X"},
            {category: "Procedures", block: {type:'variables_get'}},
            {category: "Procedures", block: {type:'logic_operation'}},

            {category: "Procedures", block: {type: "controls_if", mutation: {name: "elseif", value: 2}}, name: "X"},
            {category: "Procedures", block: {type: "text"}, name: "X"}/*,
             {category: "Math", block: "<xml><block type='controls_if'><mutation elseif='1'></mutation></block></xml>", name: "X"},
             {category: "Procedures", block: "<xml><block type='controls_if'></block></xml>", name: "X"},
             {category: "Math", block: "<xml><block type='controls_if'></block></xml>", name: "X"},
             {category: "Procedures", block: "<xml><block type='math_arithmetic'></block></xml>", name: "X"},
             {category: "Math", block: "<xml><block type='controls_repeat_ext'></block></xml>", name: "X"},
             {category: "Math", block: "<xml><block type='variables_set'></block></xml>", name: "X"}*/
        ];

        var jsonInput = {"block":[{"type":"controls_if","id":"6","children":[{"type":"value","name":"IF0","block":{"type":"logic_operation","id":"9","mutation":[{"name":"operators","value":2}],"fields":[{"name":"OP1","value":"AND"},{"name":"OP2","value":"AND"},{"name":"OP3","value":"AND"}],"inline":true}}],"inline":false,"movable":false,"x":0,"y":0}]};


        var blk = new Blockly({
            blockly: {
                toolbox: true,
                collapse: true,
                toolboxCategories: categoryArray,
                toolboxTools: toolArray,
                trashcan: true,
//                blocks: "<xml>" + document.getElementById('go').innerHTML + "</xml>",
                blocks: jsonInput,
                path: "../"
            }
        });
        blk.placeAt(document.body);
        blk.startup();
        blk.resize();
    });
</script>
</body>
<xml id="go" xmlns="http://www.w3.org/1999/xhtml"><block type="controls_repeat_ext" id="35" inline="true" x="83" y="-9"><value name="TIMES"><block type="math_number" id="36"><field name="NUM">10</field></block></value></block></xml>

</html>
